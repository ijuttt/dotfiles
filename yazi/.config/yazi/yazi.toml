# Yazi Configuration File
# Optimized for Linux environment with mpv, image viewers, and development workflow
# https://yazi-rs.github.io/docs/configuration/yazi

[manager]
# File manager preferences
show_hidden = true
show_symlink = true
sort_by = "natural"
sort_sensitive = false
sort_reverse = false
sort_dir_first = true
linemode = "size"
scrolloff = 5

[preview]
# Preview window settings
tab_size = 2
max_width = 600
max_height = 900
cache_dir = ""

[open]
# Automatic file associations
prepend_rules = [
  # Text & Configuration files
  { name = "*.txt", use = "edit" },
  { name = "*.md", use = "edit" },
  { name = "*.json", use = "edit" },
  { name = "*.toml", use = "edit" },
  { name = "*.yaml", use = "edit" },
  { name = "*.yml", use = "edit" },
  { name = "*.conf", use = "edit" },
  { name = "*.ini", use = "edit" },
  { name = "*.cfg", use = "edit" },
  
  # Programming files
  { name = "*.py", use = "edit" },
  { name = "*.js", use = "edit" },
  { name = "*.ts", use = "edit" },
  { name = "*.jsx", use = "edit" },
  { name = "*.tsx", use = "edit" },
  { name = "*.rs", use = "edit" },
  { name = "*.go", use = "edit" },
  { name = "*.cpp", use = "edit" },
  { name = "*.c", use = "edit" },
  { name = "*.h", use = "edit" },
  { name = "*.hpp", use = "edit" },
  { name = "*.sh", use = "edit" },
  { name = "*.bash", use = "edit" },
  { name = "*.lua", use = "edit" },
  { name = "*.vim", use = "edit" },
  
  # Web files
  { name = "*.html", use = "browser" },
  { name = "*.htm", use = "browser" },
  { name = "*.css", use = "edit" },
  { name = "*.scss", use = "edit" },
  { name = "*.xml", use = "edit" },
  { name = "*.svg", use = "browser" },
  
  # Images
  { name = "*.jpg", use = "image" },
  { name = "*.jpeg", use = "image" },
  { name = "*.png", use = "image" },
  { name = "*.gif", use = "image" },
  { name = "*.webp", use = "image" },
  { name = "*.bmp", use = "image" },
  { name = "*.svg", use = "image" },
  
  # Videos
  { name = "*.mp4", use = "video" },
  { name = "*.mkv", use = "video" },
  { name = "*.avi", use = "video" },
  { name = "*.mov", use = "video" },
  { name = "*.webm", use = "video" },
  { name = "*.flv", use = "video" },
  { name = "*.wmv", use = "video" },
  
  # Audio
  { name = "*.mp3", use = "audio" },
  { name = "*.flac", use = "audio" },
  { name = "*.wav", use = "audio" },
  { name = "*.ogg", use = "audio" },
  { name = "*.m4a", use = "audio" },
  { name = "*.opus", use = "audio" },
  
  # Documents
  { name = "*.pdf", use = "pdf" },
  
  # Archives
  { name = "*.zip", use = "extract" },
  { name = "*.tar", use = "extract" },
  { name = "*.tar.gz", use = "extract" },
  { name = "*.tgz", use = "extract" },
  { name = "*.tar.bz2", use = "extract" },
  { name = "*.tar.xz", use = "extract" },
  { name = "*.gz", use = "extract" },
  { name = "*.bz2", use = "extract" },
  { name = "*.xz", use = "extract" },
  { name = "*.7z", use = "extract" },
  { name = "*.rar", use = "extract" },
]

[opener]
# ========================================
# Text Editor
# ========================================
[[opener.edit]]
run = 'nvim "$@"'
block = true
orphan = true
desc = "Edit with Neovim"

# ========================================
# PDF Viewer
# ========================================
[[opener.pdf]]
run = 'zathura "$@"'
orphan = true
desc = "Open with Zathura"

# ========================================
# Image Viewer
# ========================================
[[opener.image]]
run = 'feh "$@"'
orphan = true
desc = "View with feh"

# ========================================
# Web Browser
# ========================================
[[opener.browser]]
run = 'qutebrowser "$@"'
orphan = true
desc = "Open in qutebrowser"

# For editing HTML/SVG as code
[[opener.browser]]
run = 'nvim "$@"'
block = true
orphan = true
desc = "Edit source code"

# ========================================
# Video Player
# ========================================
[[opener.video]]
run = 'mpv "$@"'
orphan = true
desc = "Play with mpv"

[[opener.video]]
run = 'vlc "$@"'
orphan = true
desc = "Play with VLC"

# ========================================
# Audio Player
# ========================================
[[opener.audio]]
run = 'mpv --audio-display=no "$@"'
orphan = true
desc = "Play audio with mpv"

[[opener.audio]]
run = 'vlc "$@"'
orphan = true
desc = "Play with VLC"

# ========================================
# Archive Extraction & Management
# ========================================
[[opener.extract]]
run = 'tar -xvf "$1"'
block = true
desc = "Extract tar archive"

[[opener.extract]]
run = 'unzip "$1"'
block = true
desc = "Extract zip archive"

[[opener.extract]]
run = '7z x "$1"'
block = true
desc = "Extract with 7z"

# ========================================
# Pager / Read-only viewer
# ========================================
[[opener.pager]]
run = 'less "$@"'
block = true
desc = "View with less"

[[opener.pager]]
run = 'bat "$@"'
block = true
desc = "View with bat (syntax highlighting)"

# ========================================
# System actions
# ========================================
[[opener.folder]]
run = 'xdg-open "$@"'
orphan = true
desc = "Open folder in file manager"

[[opener.reveal]]
run = 'xdg-open "$(dirname "$0")"'
orphan = true
desc = "Reveal in file manager"

# ========================================
# Special: Run executable
# ========================================
[[opener.execute]]
run = './"$@"'
orphan = true
desc = "Execute file"

[tasks]
# Task management
micro_workers = 5
macro_workers = 10
bizarre_retry = 5
